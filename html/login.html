<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Log In</title>
        <link href="./style.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">    
    </head>    
    <body>
        <div class="wrapper">
            <div class="background-container"></div>
            <div class="sidebar">
                <img src="./logo.png">
                <ul>
                    <li><a href="signup.html"><i class="fa fa-shield"></i> Sign Up</a></li>
                </ul>
            </div>
            <div class="content-area">
                <div class="login-box">
                    <h1>Log In</h1>
                    <form action="/login" method="post">
                        <div class="input-container">
                            <i class="fa fa-user"></i>
                            <input type="text" id="username" name="username" placeholder="Username" required class="text-field" autocomplete="off">
                        </div>
                        <div class="input-container">
                            <i class="fa fa-lock"></i>
                            <input type="password" id="password" name="password" placeholder="Password" required class="text-field" autocomplete="off">
                            <i class="fa fa-eye" id="togglePassword" style="position: absolute; margin-left: -35px; margin-top: 20px; cursor: pointer; color:black"></i>
                        </div>
                        <button type="submit" class="action-confirm">Log In</button>
                        <div id="error-message" style="display: none; color: red; font-size: 15px; margin-bottom: 30px;"></div>
                    </form>
                    <p class="text-10">Don't have an account? <a href="signup.html">Sign Up Here</a></p>
                </div>
            </div>
            </div>
            <script>
                var togglePassword = document.getElementById("togglePassword");
                var passwordInput = document.getElementById("password");

                togglePassword.addEventListener("click", function() {
                    if (passwordInput.type === "password") {
                        passwordInput.type = "text";
                        togglePassword.classList.remove("fa-eye");
                        togglePassword.classList.add("fa-eye-slash");
                    } else {
                        passwordInput.type = "password";
                        togglePassword.classList.remove("fa-eye-slash");
                        togglePassword.classList.add("fa-eye");
                    }
                });


                const urlParams = new URLSearchParams(window.location.search);
                const errorMessage = urlParams.get('error');
                const errorMessageDiv = document.getElementById('error-message');
                if (errorMessage) {
                    errorMessageDiv.textContent = errorMessage;
                    errorMessageDiv.style.display = 'block';

                    // Remove the error message from the URL after displaying it
                    window.history.replaceState({}, document.title, '/login.html');
                } else {
                    errorMessageDiv.style.display = 'none';
                }
            </script>
        </div>

    </body>
</html>